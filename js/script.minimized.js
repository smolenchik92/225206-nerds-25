var button=document.querySelector(".button-contact"),popup=document.querySelector(".popup"),close=document.querySelector(".close-popup"),form=document.querySelector("[name=contact_us]"),form_your_name=document.querySelector("[name=your_name]"),form_email=document.querySelector("[name=email]"),form_message=document.querySelector("[name=message]"),isStorageSupport=!0,storage="";try{storage=localStorage.getItem("name")}catch(e){isStorageSupport=!1}button.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("popup-show"),storage?(form_your_name.value=storage,form_email.focus()):form_your_name.focus()}),close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("popup-show"),popup.classList.remove("popup-error")}),form.addEventListener("submit",function(e){form_your_name.value&&form_email.value&&form_message.value?isStorageSupport&&localStorage.setItem("name",form_your_name.value):(e.preventDefault(),popup.classList.remove("popup-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("popup-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popup.classList.contains("popup-show")&&(popup.classList.remove("popup-show"),popup.classList.remove("popup-error")))});